<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>红色人物</title>
    <link rel="stylesheet" type="text/css" href="src/bootstrap.min.css">
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/owl.carousel.css">
    <link rel="stylesheet" type="text/css" href="css/ScenicGreat.css">
</head>
<body style="z-index: 1;margin: 0px;padding: 0px;">

<!--导航 starts-->
<div style="background-color: snow" id="header">
    <div id="headerMain">
        <a href="index.html" id="logo">
            <img src="img/logo-red.png">
        </a>
        <ul id="nav">
            <li>
                <a href="javascript:">
                    <div class="up"><img src="img/home_gruen.png"></div>
                    <div><img src="img/home_red.png"></div>
                </a>
            </li>
            <li>
                <a href="#">
                    <div class="up"></div>
                    <div>红色地图</div>
                </a>
            </li>
            <li>
                <a href="great.html" class="active">
                    <div class="up"></div>
                    <div>红色人物</div>
                </a>
            </li>
            <li>
                <a href="secnics.html">
                    <div class="up"></div>
                    <div>红色景点</div>
                </a>
            </li>
            <li>
                <a href="articles-list.html">
                    <div>寻迹红色</div>
                </a>
            </li>
            <li class="enter">
                <!-- 未登录时登录 -->
                <div id="unLogin">
                    <a href="netlogin.html">登录</a> |
                    <a href="netregister.html">注册</a>

                </div>
                <!-- 已登录时显示 -->
                <div id="alreadyLogin">
                    <span id="name" style="cursor: pointer;">null</span>
                    <span id="loginOut" style="margin-left: 10px;cursor: pointer">退出</span>
                </div>
            </li>
        </ul>
        <div id="arrow"></div>
    </div>
</div>
<!--导航 ends-->
<!--头部开始-->
<header class="main-header greatBG">
    <div class="backbg-color">
        <!--中间内容 starts-->
        <div class="banner-text">
            <div class="container">
                <div class="row">
                    <div class="banner-info text-center">
                        <h2></br><span class="grey">用人物故事再现红色经典</span> <br></h2>
                    </div>
                    <div class="banner-heading text-center">
                        <h4>与你一同领略人物风采</h4>
                    </div>
                    <div class="banner-search col-md-offset-2 col-md-8 col-md-offset-2">
                        <div class="col-md-3">
                            <select class="form-control sellone" id="select">
                                <option>不限</option>
                                <option>内蒙古自治区</option>
                                <option>甘肃省</option>
                                <option>四川省</option>
                                <option>广东省</option>
                                <option>福建省</option>
                                <option>河南省</option>
                                <option>湖北省</option>
                                <option>甘肃省</option>
                                <option>江西省</option>
                                <option>北京市</option>
                                <option>上海市</option>
                                <option>辽宁省</option>
                                <option>湖南省</option>
                                <option>河北省</option>
                                <option>安徽省</option>
                                <option>江苏省</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <input id="peopleName" type="text" class="form-control selltwo" placeholder="请输入人物姓名">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-btn">
                                <button id="search" type="submit">搜索</button>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

        </div>

    </div>
    <!--中间内容 ends-->


</header>
<!--序 starts-->
<div class="client">

    <div class="container">

        <div class="row">

            <div class="cli-info">

                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div class="sec-head text-left" style="padding-bottom:50px;">
                        <h2><strong>序</strong></h2>

                    </div>
                </div>
                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div class="quotes text-left">
                        <blockquote>
                            <p>无数能人志士为了祖国，为了人民，抱着一腔热血染山河的崇高信念，以血肉之躯炼铸起了中华民族不倒的长城。</p>
                            <p>纵观世界历史长河涌现出的无数杰出人物，他们的内心无不蕴涵着一个坚定不移的信念<br>
                                或是为民族的崛起而奋斗</br>
                                或是为人民的解放而努力</br>
                                抑或是为探索宇宙的奥妙而孜孜不倦</p>
                            <p>不管他们的信念是什么，他们都为之不懈地努力</p>
                            <p>从而为世界做出了巨大贡献</p>
                            <p>无数仁人志士为了祖国，为了人民，抱着一腔热血染山河的崇高信念，以血肉之躯炼铸起了中华民族不倒的长城。</p>
                        </blockquote>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!--遮罩层【开始】-->
<div id="bg"
     style="background-color:#000;position: absolute;left: 0px;top: 0px;opacity: 0.6;z-index: 2;width: 100%;height: 2100px;display:none; "></div>
<div id="resultShow" class="jumbotron"
     style="position: absolute;top: 150px;left: 350px;width: 1000px;height: 700px;display:none;z-index: 3; ">
    <h2 style="position: absolute;top: 20px;left: 10px"><b>搜索结果</b></h2>
    <p>&nbsp;&nbsp;-----------------------------------------------------------------------------------------------------------&nbsp;&nbsp;</p>
    <p><a id="closeResult" class="btn btn-primary btn-group-sm" style="position: absolute;top: 10px;right: 10px"
          href="#" role="button">关闭</a></p>
    <div id="temp">


    </div>
    <!--</div>-->
</div>
<!--遮罩层【结束】-->

<!--序 ends-->
<!--红色人物 ends-->
<section class="works" id="gallery">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="sec-head">
                    <h2><strong>红 色 人 物</strong></h2>
                    <hr>
                    </hr>
                </div>
            </div>
            <div class="work-sec">
                <div class="col-md-12 fil-btn">
                    <div class="filter col-md-3 col-sm-3 col-xs-3 wrk-title text-center active " data-filter="all">全部
                    </div>
                    <div class="filter col-md-3 col-sm-3 col-xs-3 wrk-title text-center" data-filter=".category-1">
                        土地革命战争
                    </div>
                    <div class="filter col-md-3 col-sm-3 col-xs-3 wrk-title text-center" data-filter=".category-2">
                        解放战争
                    </div>
                    <div class="filter col-md-3 col-sm-3 col-xs-3 wrk-title lst-cld text-center"
                         data-filter=".category-3">抗日战争
                    </div>
                </div>
                <div id="Container">
                    <div class="filimg mix category-1 category-3 col-md-4 col-sm-4 col-xs-12" data-myorder="2">
                        <a id="peopleUrl1" href="great_details.html" title="标题"><img id="peopleImg1"
                                                                                     src="img/show1.jpg">
                            <div class="img-hover">
                                <h3 id="peopleTile1">红军长征胜利纪念馆</h3>
                            </div>
                        </a>
                    </div>
                    <div class="filimg mix category-1 category-3 col-md-4 col-sm-4 col-xs-12" data-myorder="8">
                        <a id="peopleUrl2" href="great_details.html" title="标题"><img id="peopleImg2"
                                                                                     src="img/show6.jpg">
                            <div class="img-hover">
                                <h3 id="peopleTile2">红军一、二、四军会师纪念塔</h3>
                            </div>
                        </a>
                    </div>
                    <div class="filimg mix category-2 category-3 col-md-4 col-sm-4 col-xs-12" data-myorder="8">
                        <a id="peopleUrl3" href="great_details.html" title="标题"><img id="peopleImg3"
                                                                                     src="img/show4.jpg">
                            <div class="img-hover">
                                <h3 id="peopleTile3">红色国际通道纪念馆</h3>
                            </div>
                        </a>
                    </div>
                    <div class="filimg mix category-2 col-md-4 col-sm-4 col-xs-12" data-myorder="8">
                        <a id="peopleUrl4" href="great_details.html" title="标题"><img id="peopleImg4"
                                                                                     src="img/show5.jpg">
                            <div class="img-hover">
                                <h3 id="peopleTile4">红军长征纪念馆</h3>
                            </div>
                        </a>
                    </div>
                    <div class="filimg mix category-1 category-3 col-md-4 col-sm-4 col-xs-12" data-myorder="8">
                        <a id="peopleUrl5" href="great_details.html" title="标题"><img id="peopleImg5"
                                                                                     src="img/show6.jpg">
                            <div class="img-hover">
                                <h3 id="peopleTile5">红军一、二、四军会师纪念塔</h3>
                            </div>
                        </a>
                    </div>
                    <div class="filimg mix category-1 category-3 col-md-4 col-sm-4 col-xs-12" data-myorder="2">
                        <a id="peopleUrl6" href="great_details.html" title="标题"><img id="peopleImg6"
                                                                                     src="img/show1.jpg">
                            <div class="img-hover">
                                <h3 id="peopleTile6">红军长征胜利纪念馆</h3>
                            </div>
                        </a>
                    </div>


                </div>
            </div>
        </div>
    </div>
</section>
<!--红色人物 结束-->
<!--页码-->
<nav aria-label="...">
    <ul class="pager">
        <li id="prev" class="disabled"><a style="font-size: 20px" href="javascript:void(0);" onclick="getPeopleMsg(1)">上一页</a>
        </li>
        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
        <li id="next"><a style="font-size: 20px" href="javascript:void(0); " onclick="getPeopleMsg(0)">下一页</a></li>
    </ul>
</nav>
<!--<div class="col-md-offset-5 col-sm-offset-4 col-xs-offset-4">-->
<!--<nav>-->
<!--<ul class="pagination pagination-md">-->
<!--<li><a href="#">&laquo;</a></li>-->
<!--<li><a href="#">1</a></li>-->
<!--<li><a href="#">2</a></li>-->
<!--<li><a href="#">3</a></li>-->
<!--<li><a href="#">4</a></li>-->
<!--<li><a href="#">5</a></li>-->
<!--<li><a href="#">&raquo;</a></li>-->
<!--</ul>-->
<!--</nav>-->
<!--&lt;!&ndash;底部&ndash;&gt;-->
<!--</div>-->
<footer class="foot">
    <p>版权&copy;嘉应学院&nbsp;|&nbsp;地理科学与旅游学院&nbsp;|&nbsp;GIS专业&nbsp;|&nbsp;219团队<br>
        地址：广东省梅州市梅松路嘉应学院校本部&nbsp;&nbsp;邮编：514000&nbsp;&nbsp;维护：219团队<br>
        申明：本网页不做任何商业用途，只做教学实验，最终解释权归团队所有！
    </p>
</footer>

<a href="#top" id="scroll-top"></a>

<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery-1.11.3.min.js"></script>
<script src="js/jquery-1.9.1.min.js"></script>
<script src="js/owl.carousel.js"></script>
<script src="js/jquery.mixitup.js" type="text/javascript"></script>
<script type="text/javascript" src="js/jquery.quovolver.js"></script>
<script src="layer/layer.js"></script>


<script type="text/javascript">
    $(function () {

        // Instantiate MixItUp:

        $('#Container').mixItUp();

    });

    //设置为同步请求
    $.ajaxSetup({
        async: false
    });
    $(document).ready(function () {

        //获得登录状态
        $.post("/user/checkUserstatus", {}, function (result) {
            if (result.code == 1) { //用户已登录
                $("#unLogin").hide();
                $("#alreadyLogin").show();
                //取得用户昵称
                var name = result.data.uname;
                if (name == null) {
                    $("#name").html("请设置昵称");
                    setTimeout(function(){
                        layer.msg('您的昵称尚未设置，为了不影响您的正常使用，  请前往个人中心设置相关信息!');
                    }, 1000);
                } else {
                    $("#name").html(name);
                }
            } else {
                $("#alreadyLogin").hide();
            }
        }, "json");

        getPeopleMsg(0);
    });


    var indexImg = 1;

    // 获得红色人物,0下一页 ,1上一页
    function getPeopleMsg(code) {
        var index = 1;
        if (code == 0) {
            if (indexImg > 500)
                return;
            for (var i = 0; i < 6; i++) {
                peopleNext(index)
                index++;
                indexImg++;
            }

        } else {
            if (indexImg == 7)
                return;
            indexImg -= 12;
            for (var i = 0; i < 6; i++) {
                peoplePrev(index);
                index++;
                indexImg++;
            }
        }
    }

    //下一页
    function peopleNext(index) {

        $.post("/people/getPeopleMsg", {
            "id": indexImg
        }, function (result) {
            if (result.code == 1) { //获得一个人物信息
                console.log(result.data.pid);
                if (result.data.pid > 6) {//不是第一页，使上一页按钮的可以点击
                    $("#prev").removeClass("disabled");
                }
                if (result.data.pid <= 6) {//是第一页，使上一页按钮的不可以点击
                    $("#prev").addClass("disabled");
                }
                if (result.data.pid > 498) {//是最后页，使下一页按钮的不可点击
                    $("#next").addClass("disabled");
                }
                $("#peopleUrl" + index).attr('href', "great_details.html?id=" + result.data.pid);
                $("#peopleUrl" + index).attr('title', result.data.position);
                $("#peopleImg" + index).attr('src', "/image/redpeople/" + result.data.image);
                $("#peopleTile" + index).text(result.data.pname);
            }
        }, "json");
    };

    //上一页
    function peoplePrev(index) {
        $.post("/people/getPeopleMsg", {
            "id": indexImg
        }, function (result) {
            if (result.code == 1) { //获得一个人物信息
                console.log(result.data.pid);
                if (result.data.pid > 6) {//不是第一页，使上一页按钮的可以点击
                    $("#prev").removeClass("disabled");
                }
                if (result.data.pid <= 6) {//是第一页，使上一页按钮的可以点击
                    $("#prev").addClass("disabled");
                }
                if (result.data.pid > 498) {//是最后页，使下一页按钮的不可点击
                    $("#next").addClass("disabled");
                }
                $("#peopleUrl" + index).attr('href', "great_details.html?id=" + result.data.pid);
                $("#peopleUrl" + index).attr('title', result.data.position);
                $("#peopleImg" + index).attr('src', "/image/redpeople/" + result.data.image);
                $("#peopleTile" + index).text(result.data.pname);
            }
        }, "json");
    };


    //退出用户
    $("#loginOut").click(function () {
        $.post("/user/loginOut", {}, function (response) {
        }, "json");
        window.location.href = "great.html";
    });
    //跳转至个人信息页
    $("#name").click(function () {
        window.location.href = "center.html";
    });
//人物搜索
    $("#search").click(function () {
        var peopleName = $("#peopleName").val();
        var selectValue = $("#select").val();
        if (peopleName == "") {
            layer.msg('人物姓名不能为空，请重新输入！', {icon: 0});
            return;
        }
        var ii = layer.load();
        setTimeout(function(){
            layer.close(ii);
            $.post("/people/searchPeople", {"city": selectValue, "name": peopleName}, function (result) {
                if (result.code == 0) {
                    $("#temp").append("<h1>查询结果为空，可能暂时未收录！</h1>");
                } else {
//                最多选取前9个结果进行展示
                    for (var i = 0; i < result.data.length; i++) {
                        var text = "<div class='filimg mix category-1 category-3 col-md-4 col-sm-4 col-xs-12' data-myorder='8'>" +
                            "<a href='great_details.html?id=" + result.data[i].pid +
                            "' title='" + result.data[i].position + "'><img width='150px' height='150px' src='/image/redpeople/" + result.data[i].image + "'>" +
                            "                <div class='img-hover'>" +
                            "      <h4>" + result.data[i].pname + "</h4>" +
                            "                </div>" +
                            "            </a>" +
                            "        </div>";
                        console.log(text);
                        $("#temp").append(text);
                        if (i == 8)
                            return;
                    }
                }
            }, "json");
            $("#bg").css('display', 'block');
            $("#resultShow").css('display', 'block');
        }, 1000);
    });
    //关闭遮罩层
    $("#closeResult").click(function () {
        $("#temp").empty();
        $("#bg").css('display', 'none');
        $("#resultShow").css('display', 'none');

    });

</script>

</body>

</html>