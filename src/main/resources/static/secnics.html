<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>红色景点</title>
    <link rel="stylesheet" type="text/css" href="src/bootstrap.min.css">
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/owl.carousel.css">
    <link rel="stylesheet" type="text/css" href="css/ScenicGreat.css">
</head>

<body style="z-index: 1;margin: 0px;padding: 0px;">
<!--导航 starts-->
<div style="background-color: snow" id="header">
    <div id="headerMain">
        <a href="index.html" id="logo">
            <img src="img/logo-red.png">
        </a>
        <ul id="nav">
            <li>
                <a href="javascript:">
                    <div class="up"><img src="img/home_gruen.png"></div>
                    <div><img src="img/home_red.png"></div>
                </a>
            </li>
            <li>
                <a href="#">
                    <div class="up"></div>
                    <div>红色地图</div>
                </a>
            </li>
            <li>
                <a href="great.html">
                    <div class="up"></div>
                    <div>红色人物</div>
                </a>
            </li>
            <li>
                <a href="secnics.html" class="active">
                    <div class="up"></div>
                    <div>红色景点</div>
                </a>
            </li>
            <li>
                <a href="articles-list.html">
                    <div>寻迹红色</div>
                </a>
            </li>
            <li class="enter">
                <!-- 未登录时登录 -->
                <div id="unLogin">
                    <a href="netlogin.html">登录</a> |
                    <a href="netregister.html">注册</a>

                </div>
                <!-- 已登录时显示 -->
                <div id="alreadyLogin">
                    <span id="name" style="cursor: pointer;">null</span>
                    <span id="loginOut" style="margin-left: 10px;cursor: pointer">退出</span>
                </div>
            </li>
        </ul>
        <div id="arrow"></div>
    </div>
</div>
<!--导航 ends-->
<!--头部开始-->
<header class="main-header secnicsBG">
    <div class="backbg-color">
        <!--中间内容 starts-->
        <div class="banner-text">
            <div class="container">
                <div class="row">
                    <div class="banner-info text-center">
                        <h2><span class="grey">与你共同回忆<br/>中国共产党的红色记忆</span></h2>
                    </div>
                    <div class="banner-heading text-center">
                        <h4>同你一起游览你想去的景点</h4>
                    </div>
                    <div class="banner-search col-md-offset-2 col-md-8 col-md-offset-2">
                        <div class="col-md-3">
                            <select class="form-control sellone" id="select">
                                <option>不限</option>
                                <option>内蒙古自治区</option>
                                <option>甘肃省</option>
                                <option>四川省</option>
                                <option>广东省</option>
                                <option>福建省</option>
                                <option>河南省</option>
                                <option>湖北省</option>
                                <option>甘肃省</option>
                                <option>江西省</option>
                                <option>北京市</option>
                                <option>上海市</option>
                                <option>辽宁省</option>
                                <option>湖南省</option>
                                <option>河北省</option>
                                <option>安徽省</option>
                                <option>江苏省</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <input id="secnicName" type="text" class="form-control selltwo" placeholder="请输入景点名称">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-btn">
                                <button id="search" type="submit">搜索</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--中间内容 ends-->
</header>
<!--头部 ends-->


<!--景点展示-->
<section class="feature" id="listed">
    <div class="container">
        <div class="row">
            <div class="fea-head">
                <div class="col-md-12">
                    <div class="sec-head">
                        <!--todo 直接采用死数据轮播-->
                        <h2><strong>热 门 景 点</strong></h2>
                        <hr>
                        </hr>
                    </div>
                </div>
                <div class="feature-slider col-md-12">
                    <div id="owl-demo">
                        <div class="item">
                            <a href="#">
                                <a id="hotSecnicsUrl1" href="secnics_details.html?id=22" title="红色记忆展览馆"><img
                                        id="hotSecnicsImg1" src="image/redscenic/22-1.jpg" alt="景点图片">
                                    <div class="img-info">
                                        <h4 id="hotSecnicsText1">红色记忆展览馆</h4>
                                    </div>
                                </a>
                            </a>
                        </div>
                        <div class="item">
                            <a href="#">
                                <a id="hotSecnicsUrl2" href="secnics_details.html?id=3" title="红军长征纪念景园"><img
                                        id="hotSecnicsImg2" src="image/redscenic/3-1.jpg" alt="景点图片">
                                    <div class="img-info">
                                        <h4 id="hotSecnicsText2">红军长征纪念景园</h4>
                                    </div>
                                </a>
                            </a>
                        </div>
                        <div class="item">
                            <a href="#">
                                <a id="hotSecnicsUrl3" href="secnics_details.html?id=11" title="铁人王进喜纪念馆"><img
                                        id="hotSecnicsImg3" src="image/redscenic/11-1.jpg" alt="景点图片">
                                    <div class="img-info">
                                        <h4 id="hotSecnicsText3">铁人王进喜纪念馆</h4>
                                    </div>
                                </a>
                            </a>
                        </div>
                        <div class="item">
                            <a href="#">
                                <a id="hotSecnicsUrl4" href="secnics_details.html?id=33" title="红军长征纪念馆"><img
                                        id="hotSecnicsImg4" src="image/redscenic/33-1.jpg" alt="景点图片">
                                    <div class="img-info">
                                        <h4 id="hotSecnicsText4">红军长征纪念馆</h4>
                                    </div>
                                </a>
                            </a>
                        </div>
                        <div class="item">
                            <a href="#">
                                <a id="hotSecnicsUrl5" href="secnics_details.html?id=106" title="红色娘子军纪念园"><img
                                        id="hotSecnicsImg5" src="image/redscenic/106-1.jpg" alt="景点图片">
                                    <div class="img-info">
                                        <h4 id="hotSecnicsText5">红色娘子军纪念园</h4>
                                    </div>
                                </a>
                            </a>
                        </div>
                        <div class="item">
                            <a href="#">
                                <a id="hotSecnicsUrl6" href="secnics_details.html?id=161" title="周恩来故居"><img
                                        id="hotSecnicsImg6" src="image/redscenic/161-1.jpg" alt="景点图片">
                                    <div class="img-info">
                                        <h4 id="hotSecnicsText6">周恩来故居</h4>
                                    </div>
                                </a>
                            </a>
                        </div>
                        <div class="item">
                            <a href="#">
                                <a id="hotSecnicsUrl7" href="secnics_details.html?id=269" title="武汉革命博物馆"><img
                                        id="hotSecnicsImg7" src="image/redscenic/269-1.jpg" alt="景点图片">
                                    <div class="img-info">
                                        <h4 id="hotSecnicsText7">武汉革命博物馆</h4>
                                    </div>
                                </a>
                            </a>
                        </div>
                        <div class="item">
                            <a href="#">
                                <a id="hotSecnicsUrl8" href="secnics_details.html?id=239" title="苏维埃政府旧址"><img
                                        id="hotSecnicsImg8" src="image/redscenic/239-1.jpg" alt="景点图片">
                                    <div class="img-info">
                                        <h4 id="hotSecnicsText8">苏维埃政府旧址</h4>
                                    </div>
                                </a>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<!--红色景点-->
<section class="works" id="gallery">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="sec-head">
                    <h2><strong>红 色 景 点</strong></h2>
                    <hr>
                    </hr>
                </div>
            </div>
            <div class="work-sec">
                <div class="col-md-12 fil-btn">
                    <div class="filter col-md-3 col-sm-3 col-xs-3 wrk-title text-center active " data-filter="all">全部
                    </div>
                    <div class="filter col-md-3 col-sm-3 col-xs-3 wrk-title text-center" data-filter=".category-1">纪念馆
                    </div>
                    <div class="filter col-md-3 col-sm-3 col-xs-3 wrk-title text-center" data-filter=".category-2">烈士墓
                    </div>
                    <div class="filter col-md-3 col-sm-3 col-xs-3 wrk-title lst-cld text-center"
                         data-filter=".category-3">景区
                    </div>
                </div>
                <div id="Container">

                    <div class="filimg mix category-1 category-3 col-md-4 col-sm-4 col-xs-12" data-myorder="2">
                        <a id="secnicsUrl1" href="secnics_details.html" title="标题"><img id="secnicsImg1"
                                                                                        src="img/show1.jpg">
                            <div class="img-hover">
                                <h3 id="secnicsTile1">红军长征胜利纪念馆</h3>
                            </div>
                        </a>
                    </div>
                    <div class="filimg mix category-2 col-md-4 col-sm-4 col-xs-12" data-myorder="4">
                        <a id="secnicsUrl2" href="secnics_details.html" title="标题"><img id="secnicsImg2"
                                                                                        src="img/show2.jpg">
                            <div class="img-hover">
                                <h3 id="secnicsTile2">江桥抗战纪念馆</h3>
                            </div>
                        </a>
                    </div>
                    <div class="filimg mix category-1 col-md-4 col-sm-4 col-xs-12" data-myorder="1">
                        <a id="secnicsUrl3" href="secnics_details.html" title="标题"><img id="secnicsImg3"
                                                                                        src="img/show3.jpeg">
                            <div class="img-hover">
                                <h3 id="secnicsTile3">黄继光纪念馆</h3>
                            </div>
                        </a>
                    </div>
                    <div class="filimg mix category-2 category-3 col-md-4 col-sm-4 col-xs-12" data-myorder="8">
                        <a id="secnicsUrl4" href="secnics_details.html" title="标题"><img id="secnicsImg4"
                                                                                        src="img/show4.jpg">
                            <div class="img-hover">
                                <h3 id="secnicsTile4">红色国际通道纪念馆</h3>
                            </div>
                        </a>
                    </div>
                    <div class="filimg mix category-2 col-md-4 col-sm-4 col-xs-12" data-myorder="1">
                        <a id="secnicsUrl5" href="secnics_details.html" title="标题"><img id="secnicsImg5"
                                                                                        src="img/show5.jpg">
                            <div class="img-hover">
                                <h3 id="secnicsTile5">红军长征纪念馆</h3>
                            </div>
                        </a>
                    </div>
                    <div class="filimg mix category-2 category-3 col-md-4 col-sm-4 col-xs-12" data-myorder="8">
                        <a id="secnicsUrl6" href="secnics_details.html" title="标题"><img id="secnicsImg6"
                                                                                        src="img/show6.jpg">
                            <div class="img-hover">
                                <h3 id="secnicsTile6">红军一、二、四军会师纪念塔</h3>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!--页码-->
<nav aria-label="...">
    <ul class="pager">
        <li id="prev" class="disabled"><a style="font-size: 20px" href="javascript:void(0);" onclick="getSecnicsMsg(1)">上一页</a>
        </li>
        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
        &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
        <li id="next"><a style="font-size: 20px" href="javascript:void(0); " onclick="getSecnicsMsg(0)">下一页</a></li>
    </ul>
</nav>
<!--红色景点 结束-->
<!--<div class="col-md-offset-5 col-sm-offset-4 col-xs-offset-4">-->
<!--<nav>-->
<!--<ul class="pagination">-->
<!--<li><a href="#" class="disable">&laquo;</a></li>-->
<!--<li><a href="#" class="active">1</a></li>-->
<!--<li><a href="#">2</a></li>-->
<!--<li><a href="#">3</a></li>-->
<!--<li><a href="#">4</a></li>-->
<!--<li><a href="#">5</a></li>-->
<!--<li><a href="#">&raquo;</a></li>-->
<!--</ul>-->
<!--</nav>-->
<!--</div>-->

<!--底部-->
<footer class="foot">
    <p>版权&copy;嘉应学院&nbsp;|&nbsp;地理科学与旅游学院&nbsp;|&nbsp;GIS专业&nbsp;|&nbsp;219团队<br>
        地址：广东省梅州市梅松路嘉应学院校本部&nbsp;&nbsp;邮编：514000&nbsp;&nbsp;维护：219团队<br>
        申明：本网页不做任何商业用途，只做教学实验，最终解释权归团队所有！
    </p>
</footer>


<a href="#top" id="scroll-top"></a>
<!--遮罩层【开始】-->
<div id="bg"
     style="background-color:#000;position: absolute;left: 0px;top: 0px;opacity: 0.6;z-index: 2;width: 100%;height: 2300px;display:none; "></div>
<div id="resultShow" class="jumbotron"
     style="position: absolute;top: 150px;left: 350px;width: 1000px;height: 700px;display:none;z-index: 3; ">
    <h2 style="position: absolute;top: 20px;left: 10px"><b>搜索结果</b></h2>
    <p>&nbsp;&nbsp;-----------------------------------------------------------------------------------------------------------&nbsp;&nbsp;</p>
    <p><a id="closeResult" class="btn btn-primary btn-group-sm" style="position: absolute;top: 10px;right: 10px"
          href="#" role="button">关闭</a></p>
    <div id="temp">
    </div>
    <!--</div>-->
</div>
<!--遮罩层【结束】-->

<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery-1.11.3.min.js"></script>
<script src="js/jquery-1.9.1.min.js"></script>
<script src="js/owl.carousel.js"></script>
<script src="js/jquery.mixitup.js" type="text/javascript"></script>
<script type="text/javascript" src="js/jquery.quovolver.js"></script>
<script src="layer/layer.js"></script>
<!--for 景点展示 自动滚动-->
<script>
    $(function () {
        $('a[href*=#]:not([href=#])').click(function () {
            if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') && location.hostname == this.hostname) {

                var target = $(this.hash);
                target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
                if (target.length) {
                    $('html,body').animate({
                        scrollTop: target.offset().top
                    }, 1000);
                    return false;
                }
            }
        });
    });
</script>
<!--demo-->
<script>
    $(document).ready(function () {
        $("#owl-demo").owlCarousel({
            autoPlay: 4000,
            items: 4,
            itemsDesktop: [1199, 3],
            itemsDesktopSmall: [979, 3]
        });

    });

</script>
<script type="text/javascript">
    $(function () {

        // Instantiate MixItUp:

        $('#Container').mixItUp();

    });
</script>

<script type="text/javascript">
    $(function () {

        // Instantiate MixItUp:

        $('#Container').mixItUp();

    });

    //设置为同步请求
    $.ajaxSetup({
        async: false
    });
    $(document).ready(function () {

        //获得登录状态
        $.post("/user/checkUserstatus", {}, function (result) {
            if (result.code == 1) { //用户已登录
                $("#unLogin").hide();
                $("#alreadyLogin").show();
                //取得用户昵称
                var name = result.data.uname;
                if (name == null) {
                    $("#name").html("请设置昵称");
                    setTimeout(function(){
                        layer.msg('您的昵称尚未设置，为了不影响您的正常使用，  请前往个人中心设置相关信息!');
                    }, 1000);
                } else {
                    $("#name").html(name);
                }
            } else {
                $("#alreadyLogin").hide();
            }
        }, "json");

        getSecnicsMsg(0);


    });


    var indexImg = 1;

    // 获得红色人物,0下一页 ,1上一页
    function getSecnicsMsg(code) {
        var index = 1;
        if (code == 0) {
            if (indexImg > 500)
                return;
            for (var i = 0; i < 6; i++) {
                secnicsNext(index)
                index++;
                indexImg++;
            }

        } else {
            if (indexImg == 7)
                return;
            indexImg -= 12;
            for (var i = 0; i < 6; i++) {
                secnicsPrev(index);
                index++;
                indexImg++;
            }
        }
    }

    //下一页
    function secnicsNext(index) {

        $.post("/scenic/getScenicMsg", {
            "id": indexImg
        }, function (result) {
            if (result.code == 1) { //获得一个人物信息
                if (result.data.sid > 6) {//不是第一页，使上一页按钮的可以点击
                    $("#prev").removeClass("disabled");
                }
                if (result.data.sid <= 6) {//是第一页，使上一页按钮的不可以点击
                    $("#prev").addClass("disabled");
                }
                if (result.data.sid > 498) {//是最后页，使下一页按钮的不可点击
                    $("#next").addClass("disabled");
                }
                var arr = splitImageStr(result.data.image);
                var imgPath = "image/redscenic/" + arr[0];
                $("#secnicsUrl" + index).attr('href', "secnics_details.html?id=" + result.data.sid);
                $("#secnicsUrl" + index).attr('title', result.data.address);
                $("#secnicsImg" + index).attr('src', imgPath);
                $("#secnicsTile" + index).text(result.data.sname);
            }
        }, "json");
    };

    //上一页
    function secnicsPrev(index) {
        $.post("/scenic/getScenicMsg", {
            "id": indexImg
        }, function (result) {
            if (result.code == 1) { //获得一个景点信息
                if (result.data.sid > 6) {//不是第一页，使上一页按钮的可以点击
                    $("#prev").removeClass("disabled");
                }
                if (result.data.sid <= 6) {//是第一页，使上一页按钮的可以点击
                    $("#prev").addClass("disabled");
                }
                if (result.data.sid > 498) {//是最后页，使下一页按钮的不可点击
                    $("#next").addClass("disabled");
                }
                var arr = splitImageStr(result.data.image);
                var imgPath = "image/redscenic/" + arr[0];
                $("#secnicsUrl" + index).attr('href', "secnics_details.html?id=" + result.data.sid);
                $("#secnicsUrl" + index).attr('title', result.data.address);
                $("#secnicsImg" + index).attr('src', imgPath);
                $("#secnicsTile" + index).text(result.data.sname);
            }
        }, "json");
    };


    $("#search").click(function () {
        var secnicName = $("#secnicName").val();
        var selectValue = $("#select").val();
        if (secnicName == "") {
            layer.msg('景点名称不能为空，请重新输入！', {icon: 0});
            return;
        }
        var ii = layer.load();
        setTimeout(function(){
            layer.close(ii);
            $.post("/scenic/searchScenic", {"city": selectValue, "name": secnicName}, function (result) {
                if (result.code == 0) {
                    $("#temp").append("<h1>查询结果为空，可能暂时未收录！</h1>");
                } else {
//                最多选取前9个结果进行展示
                    for (var i = 0; i < result.data.length; i++) {
                        var text = "<div class='filimg mix category-1 category-3 col-md-4 col-sm-4 col-xs-12' data-myorder='8'>" +
                            "<a href='secnics_details.html?id=" + result.data[i].sid +
                            "' title='" + result.data[i].address + "'><img width='150px' height='150px' src='/image/redscenic/" + splitImageStr(result.data[i].image)[0] + "'>" +
                            "                <div class='img-hover'>" +
                            "      <h4>" + result.data[i].sname + "</h4>" +
                            "                </div>" +
                            "            </a>" +
                            "        </div>";
                        console.log(text);
                        $("#temp").append(text);
                        if (i == 8)
                            return;
                    }
                }
            }, "json");
            $("#bg").css('display', 'block');
            $("#resultShow").css('display', 'block');
        }, 1000);
    });

    // 切割景点的返回信息中的图片,返回一个数组
    function splitImageStr(str) {
        var arr;
        // 在每个逗号处进行分隔。
        arr = str.split(",");
        return (arr);
    }


    // 获取最小值到最大值之前的整数随机数
    //todo 可能造成重复数字,后期解决
    function getRandomNum(Min, Max) {
        var Range = Max - Min;
        var Rand = Math.random();
        return (Min + Math.round(Rand * Range));
    }


    //退出用户
    $("#loginOut").click(function () {
        $.post("/user/loginOut", {}, function (response) {
        }, "json");
        window.location.href = "secnics.html";
    });
    //跳转至个人信息页
    $("#name").click(function () {
        window.location.href = "center.html";
    });
    //    关闭遮罩层
    $("#closeResult").click(function () {
        $("#temp").empty();
        $("#bg").css('display', 'none');
        $("#resultShow").css('display', 'none');

    });
</script>
</body>

</html>